# 1장: 객체, 설계

## 내용정리

### 개요

해당장은 극장에서 티켓을 판매하는 시스템을 구현하고 개선해보며 객체지향적 설계시 고려해야할 원칙과 더 나은 설계에 대해서 논했다.

로버트 마틴이 제시한 소프트웨어 모듈이 가져야하는 3가지 특징은 다음과 같다.

1. 정상적으로 작동해야한다.
2. 변경에 유연해야한다.
3. 가시성이 높아야 한다.

책에서는 3가지 사항중 2번과 3번을 강조했다.

### 티켓판매시스템

티켓판매시스템의 첫번째 버전은 극장, 판매원, 사람, 가방 등의 객체들이 존재했다. 시스템이 동작하는데는 문제가 없었지만, 해당 객체들은 단순히 상태(데이터)만을 가지고 극장 객체내부 함수에서 결합되었다.

해당 구현의 경우 첫번째로 2번 문제가 발생한다.

- 높은 객체간 결합도

    극장 객체는 모든 객체를 의존해야함으로 다수의 객체중 하나의 객체라도 변경이 발생하면 덩달아 수정되야한다. 
    

3번과 관련된 문제는 아래와 같다.

- 다른 객체의 데이터를 직접적으로 조작
    
    극장 객체가 조작하는 데이터는 자신의 데이터가 아니다. 따라서 해당 코드를 접한 개발자는 데이터와 그 처리의 분리로 인해 혼란에 빠지게된다.
    

### 티켓판매시스템 개선

변경유연성을 높이기 위해 우선 객체간 결합도를 낮출필요가 있다. 주목해여할 가장 큰 문제는 극장 객체가 너무 많은 책임을 가지고 있다는 것이였다. 

극장은 단순히 입장하는 청중에만 책임을 지고, 티켓 판매와 같은 것은 판매원에게 책임을 전담시킴으로써 책임을 우선 분산할 수 있다.

책임을 단순히 분할하는 것에 그치지 않고, 중요한점은 객체의 자율성을 높이는 것이다. 

객체의 자율성을 높이는 방법은 자신의 상태(데이터)를 직접 관리하도록 하는 것이다. 상태의 처리를 객체자신이 담당하게될 경우 자연스럽게 상태를 노출할 필요가 없어지며, 특정 객체의 동작에만 주목할 수 있다.

이렇게 함으로써 흔히말하는 응집도(데이터 + 처리)가 높고 결합도가 낮은(책임, 역할에만 주목) 설계를 이룰 수 있다.

### 트레이드 오프

설계의 어려운점은 트레이드 오프를 고려해야 한다는 점이다. 개선되기전 티켓판매시스템은 객체의 자율성을 크게 훼손하지만, 단순하고 빠른 구현이라고 말할 수 도있다.

## 느낀점 및 개선점

### 접근 지정자와 인터페이스

인터페이스라고 하면 Swift의 프로토콜, 자바의 인터페이스와 같은 언어레벨의 툴이 떠오른다. 

하지만 단순히 public / private과 같은 접근지정자로도 인터페이스를 표현할 수 있다. 

이번장은 적절한 인터페이스를 통한 캡슐화와 캡슐화로 객체의 자율성을 확보했을 때 생기는 장점들을 말했던 것 같다. 

해당 부분은 인터페이스 구현을 통한 추상화가 주는 장점과는 별개인 것 같다.

### 특정 작업의 적절한 역할과 책임분배

이번장을 통해 객체의 자율성을 높일 경우 변화에 유연하고 무엇보다도 직관적인 코드작성이 가능함을 알 수 있었다. 

하지만 중요한 점은 어떤 객체를 생성하고 어떤 책임을 부여할 것인지 그리고 부여된 책임들이 하나의 역할로써 조화를 이룰 수 있는지 생각하는 것이 중요하다고 생각했다. 

책에서는 객체간 주고받는 메세지에 주목하는 것이 책임부여에 시발점이 된다고한다.